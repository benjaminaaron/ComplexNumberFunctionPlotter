<html> 
	<head> 
		<title>complex number function plotter</title> 

		<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
		<!--<script type="text/javascript" src="js/three.min.js"></script> 
		<script type="text/javascript" src="js/OrbitControls.js"></script>-->

		<style> 
			body {
				color: #cccccc;
				background-color: #cccccc;
				margin: 0px;
			}
		</style> 
	</head> 
	<body> 

		<div id="ThreeJS" style="z-index: 1; position: absolute; left:0px; top:0px"></div>
	
		<script>

			var container, scene, camera, renderer, controls;

			var size = 20;

			//init();
			//animate();

			function init() {
				scene = new THREE.Scene();
				//scene.fog = new THREE.FogExp2(0xcccccc, 0.002);

				var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;	
				var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;
				camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
				scene.add(camera);
				camera.position.set(0,20,50);
				camera.lookAt(scene.position);	

				renderer = new THREE.WebGLRenderer({antialias:true});
				renderer.setClearColor(0xcccccc);
				renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);

				container = document.getElementById('ThreeJS');
				container.appendChild(renderer.domElement);

				controls = new THREE.OrbitControls(camera, renderer.domElement);

				light = new THREE.DirectionalLight(0xffffff);
				light.position.set(1, 1, 1);
				scene.add(light);
				light = new THREE.DirectionalLight(0x002288);
				light.position.set(-1, -1, -1);
				scene.add(light);
				light = new THREE.AmbientLight(0x222222);
				scene.add(light);

				var sphereGeometry = new THREE.SphereGeometry( 5, 100, 100 ); 
				var sphereMaterial = new THREE.MeshLambertMaterial( {color: 0x8888ff} ); 
				var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
				sphere.position.set(0, 0, 0);
				scene.add(sphere);


				var axes = new THREE.AxisHelper(size);
				scene.add(axes);

				var cubeGeometry = new THREE.BoxGeometry(size, size, size); 
				var cube = new THREE.BoxHelper(new THREE.Mesh(cubeGeometry));
				cube.material.color.set(0x777777);
				cube.position.set(0, 0, 0);
				scene.add(cube);

			}

			function animate() {
			    requestAnimationFrame(animate);
				render();		
			}

			function render() {	
				renderer.render(scene, camera);
			}

			function randomColor(){
				return '#' + Math.floor(Math.random() * 16777215).toString(16);
			}

			function showPoint(x, y, z){	
				var col = randomColor();
				var sphereGeometry = new THREE.SphereGeometry(0.6); 
				var sphereMaterial = new THREE.MeshLambertMaterial({color: col});
				var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
				sphere.position.set(x, y, z);
				scene.add(sphere);
			}

			function dist(x1, y1, z1, x2, y2, z2){
				return Math.sqrt(Math.pow(x2-x1,2) + Math.pow(y2-y1,2) + Math.pow(z2-z1,2));
			}

			function roundVal(val, decPlaces){
				if(('' + val).split('.').length > 1){ //if has decimal places TODO check better?
					var fact = Math.pow(10,decPlaces);
					return Math.round(val * fact) / fact;
				} else {
					return val;
				}	
			}

			var C = function(r, i){
				this.r = r;
				this.i = i;
				this.length = Math.sqrt(Math.pow(r,2) + Math.pow(i,2));
				this.angle = Math.atan(i / r);
				this.toString = function(){
					return '(' + roundVal(this.r,2) + ' ' + (this.i < 0 ? '-' : '+') + ' ' + (Math.abs(this.i) == 1 ? 'i' : roundVal(Math.abs(this.i),2) + 'i') + ')'; 
				}
			}  

			var add = function(C1, C2){
				return new C(C1.r + C2.r, C1.i + C2.i);
			}

			var sub = function (C1, C2){
				return new C(C1.r - C2.r, C1.i - C2.i);
			}

			var mul = function(C1, C2){//(a + bi) (g + hi) = ag + ahi + big - bh
				var newR = C1.r * C2.r - C1.i * C2.i; 
				var newI = C1.r * C2.i + C1.i * C2.r;
				return new C(newR, newI);
			}

			var div = function(C1, C2){
				var divisor = Math.pow(C2.r,2) + Math.pow(C2.i,2);
				var newR = (C1.r * C2.r + C1.i * C2.i) / divisor;
				var newI = (C1.i * C1.r - C1.r * C2.i) / divisor;
				return new C(newR, newI);
			}

			var pow = function(Cbase, exp){
				if(exp == 0)
					return new C(1, 0);
				var temp = new C(Cbase.r, Cbase.i);
				for(var i = 1; i < exp; i++){
					temp = mul(temp, Cbase);
				}
				return temp;
			}

			//TODO sqrt

			$(document).ready(function() {

				var c1 = new C(1, 2);
				var c2 = new C(2, 3)
				console.log(c1 + ' * ' + c2 + ' = ' + mul(c1,c2));
				console.log(c1 + ' + ' + c2 + ' = ' + add(c1,c2));
				console.log(c1 + ' - ' + c2 + ' = ' + sub(c1,c2));
				console.log(c1 + ' / ' + c2 + ' = ' + div(c1,c2));
				console.log(c1 + '^3 = ' + pow(c1,3));

			});



			/* PARKING LOT */
	
		</script>
	</body> 
</html>





